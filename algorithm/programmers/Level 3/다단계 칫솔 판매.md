# 다단계 칫솔 판매
 - [다단계 칫솔 판매](https://programmers.co.kr/learn/courses/30/lessons/77486?language=javascript#)


### 풀이
  - 핵심 포인트
    - 중복 seller가 발생 가능하다.
    - seller가 발생할 때마다 해당 수익에 대한 배분만 전부 진행하여 누적한다.(누적된 이익에 대한 9:1 배분 X)
  
  - hash로 name에 대한 추천인과 profit 체크

  ```javascript
  function solution(enroll, referral, seller, amount) {
      const answer = [];
      const price = 100;
      const hash = {'-' : {recommend : '', profit : 0}};
      
      enroll.forEach((name,i) => { hash[name] = {recommend : referral[i], profit : 0} });
  
      seller.forEach((sellerName, idx)=>{
          let profit = amount[idx] * price;
          let currentName = sellerName;
          while(currentName){
              hash[currentName].profit += Math.ceil(profit*0.9);
              currentName = hash[currentName].recommend;
              profit = Math.floor(profit * 0.1);
              if(profit < 1) break
          }
      });
       
      return enroll.map(name => hash[name].profit);
  }
  ```