
# 고차함수
  - 하나 이상의 함수를 매개변수로 취하거나 함수를 결과로 반환하는 함수
  - 매개 변수로 전달되는 함수는 콜백함수
  - 대표 배열 조작 메서드
    - `Array.sort(callback function)`
    - `Array.forEach()`
    - `Array.map()`
    - `Array.find()`
    - `Array.filter()`
    - `Array.reduce()`


### sort() 문제와 한계점
  - 문제 : 일의 자리 4가 10의 자리보다 뒤쪽에 정렬
  - 원인 : sort 메서드로 정렬될 때 배열의 요소가 일시적으로 문자열로 변경되어 유니코드 코드 포인트 순으로 정렬

  - 추가 한계점 : 대소문자 구분 없이 정렬하고 싶지만, 대소문자 구분되어 정렬됨

  - **해결**
    - 고차 함수 sort(function) 활용
      ```javascript
      let ascendingOrder = function(x, y) {
        return x-y;
      }
      let descendingOrder = function(x, y) {
        return y-x;
      }
      let nums = [1,5,100,10,50];
      console.log(nums.sort(ascendingOrder));  // [1,5,10,50,100]
      ```
    - `String.toUpperCase()`, `String.toLowerCase()` 활용
      ```javascript
      let ascendingOrder = function(x, y) {
        if (typeof x === 'string') x = x.toUpperCase();
        if (typeof y === 'string') y = y.toUpperCase();

        return x > y ? 1 : -1;
      }
      ...
      ```



### forEach()
  - 배열 요소 별 콜백 함수 각각에 **실행**
    - Array.forEach(function(item,index,array){...})
  - item : 배열 요소
  - index: 배열 위치
  - array: 원본 배열

  ```javascript
  // 순열 함수 예제
  const getCombinations = function (arr, selectNumber) {
    const results = [];
    if (selectNumber === 1) return arr.map(value => [value]);
      arr.forEach((fixed, index, origin) => {
        const rest = origin.slice(index + 1);
        const combinations = getCombinations(rest, selectNumber - 1);
        const attached = combinations.map(combination => [fixed, ...combination]);
        results.push(...attached);
      });
    return results;
  }
  ```

### map()
  - 배열 요소 별 함수 호출 및 결과를 **배열로 반환**
    - Array.map(function(item,index,array){...})
  - item : 배열 요소
  - index: 배열 위치
  - array: 원본 배열

  ```javascript
  [1,2,3].map((num) => {
    return num*2
  })                           // [2,4,6]

  [1,2,3].map((num) => num*2)  // [2,4,6]
  ```

### find()
  - 콜백 함수의 조건을 만족하는, **단 하나의 값만 반환**
    - Array.find(function(item,index,array){})
  - item : 배열 요소
  - index: 배열 위치
  - array: 원본 배열

  ```javascript
  let users = [{name:'bob', job: true}, {name:'jason', job: false}];

  users.find(user => {return user.jbo == false})  // {name:'jason',job:false}

  users.find(user => user.jbo == false)

  users.find(function(user){
    return user.jbo == false
  });
  ```


### filter()
  - 콜백 함수의 조건을 **만족하는 값을 모두 배열로 변환**
    - Array.filter(function(item,index,array){})
  - item : 배열 요소
  - index: 배열 위치
  - array: 원본 배열

  ```javascript
  let users = [
    {name:'bob', job: true},
    {name:'jason', job: false},
    {name:'ably', job: false},
  ];

  users.filter(user => {return user.jbo == false})  
  // [{name:'jason',job:false}, {name:'ably', job: false}]

  users.filter(user => user.jbo == false)

  users.filter(function(user){
    return user.jbo == false
  });
  ```

### reduce()
  - 요소 별 함수 수행 누적 결과값 반환
    - Array.reduce(function(accumulator, item, index, array){})
  - accumulator : 이전 함수 결과
    - initial로 초기값 설정 가능
    - 지정된 initial 없으면 index 0이 초기값이며, index 1부터 수행
  - item : 배열 요소
  - index: 배열 위치
  - array: 원본 배열

  ```javascript
  let nums = [1,2,3,4,5];
  let count = 0;

  let sum = nums.reduce((acc,item,index,array)=>{
    console.log(acc, item, index);
    count++;
    return accumulator + item;
  }, 0);

  // result value index
  //   0      1     0
  //   1      2     1
  //   3      3     2
  //   6      4     3
  //   10     5     4

  console.log(sum); // 15

  // ================ inital 없는 경우 =====================


  // initial 없으므로 index 0의 값이 acc로 들어가고 index 1부터 실행
  let sum = nums.reduce((acc,item,index,array)=>{
    console.log(acc, item, index);
    count++;
    return accumulator + item;
  });
  
  // result value index
  //   1      2     1
  //   3      3     2
  //   6      4     3
  //   10     5     4

  console.log(sum); // 15
  ```



