
# 프로토타입
  - 어떠한 객체가 만들어지기 위해 객체의 모태가 되는 원형
  - 자바스크립트는 일반적인 객체지향 언어와는 다르게, 프로토타입을 이용한 복사를 통해 새로운 객체 생성
  - 일반적인 객체 생성 방식 : 속성은 생성자, 메서드는 프로토타입에서 정의

  - 자바스크립트의 모든 객체는 자신의 부모 역할을 담당하는 객체와 연결되어 있다. 
    - 이것은 객체 지향의 상속 개념과 같이 부모 객체의 프로퍼티 또는 메소드를 상속받아 사용할 수 있게 한다.

```javascript
// 속성 정의
function Person(name, age){
  this.name = name;
  this.age = age;
}

// 메서드 정의
Person.prototype.isAdult = function(){
   return this.age > 18;
};

const p1 = new Person("bob", 26);
const p2 = new Person("jason", 16);

console.log(p1.isAdult()); // true
console.log(p2.isAdult()); // false
```

### 프로토타입 객체

>"Prototype 객체는 생성자 함수에 의해 생성된 각각의 객체에 공유 프로퍼티를 제공하기 위해 사용한다."
 
  <img src="https://poiemaweb.com/img/printout_student_obj_from_chrome.png" width="500">

  - 자바스크립트의 모든 객체는 `[[Prototype]]`이라는 인터널 슬롯(internal slot)를 가진다.
    - `[[Prototype]]`의 값은 Prototype(프로토타입) 객체이다.
  - `__proto__` 프로퍼티에 접근하면 내부적으로 Object.getPrototypeOf()가 호출되어 프로토타입 객체를 반환
  
  ```javascript
  function Person(name, age){
    this.name = name;
    this.age = age;
  }
  console.log(Person.__proto__ === Object.prototype); // true
  
  // Person 객체는 __proto__ 프로퍼티로 자신의 부모 객체(프로토타입 객체)인 Object.prototype을 가리키고 있다.
  ```

  > *인터널 슬롯(internal slot) / 인터널 메서드(internal method) 
  > - 사양이 필수 행동을 정의하는데 사용하는 의사 속성/메서드이다.
  > - 사용자 코드가 아닌 엔진의 동작을 위해 사용된다.



### `[[Prototype]]` vs prototype 프로퍼티
  - 모든 객체는 자신의 프로토타입 객체를 가리키는 `[[Prototype]]` 인터널 슬롯을 갖고, 이는 상속을 위해 사용된다.
  - 함수도 객체이므로 `[[Prototype]]` 인터널 슬롯을 가진다.
    - 하지만, 함수 객체는 일반 객체와 달리 prototype 프로퍼티도 소유하게 된다.
    - `[[prototype]]` 과 prototype 프로퍼티는 다른 것이다.
  
  ```javascript
  function Person(name) {
    this.name = name;
  }

  var foo = new Person('Lee');

  console.dir(Person); // 함수 객체는 prototype 프로퍼티가 있다.
  console.dir(foo);    // 일반 객체는 prototype 프로퍼티가 없다.
  ```
  <img src="https://user-images.githubusercontent.com/62092665/135854412-b67768b0-0e87-4121-85b5-204498c5880a.png" width="300px">


#### `[[Prototype]]`
  - 함수를 포함한 모든 객체가 가지고 있는 인터널 슬롯
  - 객체의 입장에서 자신의 부모 역할을 하는 프로토타입 객체를 가리키며 함수 객체의 경우 `Function.prototype`을 가리킨다.
  ```javascript
  console.log(Person.__proto__ === Function.prototype); // 함수 객체의 프로토타입 객체는 Function.prototype 이다.
  ```

#### prototype 프로퍼티
  - 함수 객체만 가지고 있는 프로퍼티
  - 함수 객체가 생성자로 사용될 때 이 함수를 통해 생성될 객체의 부모 역할을 하는 객체(프로토타입 객체)를 가리킨다.

  ```javascript
  console.log(Person.prototype === foo.__proto__);  // 함수 객체의 prototype은 생성된 객체의 프로토타입 객체이다.
  ```



### constructor 프로퍼티
  - 프로토타입 객체는 contructor property를 갖는다. 
  - constructor 프로퍼티는 객체 입장에서 자신을 생성한 객체를 가리킨다.
  ```javascript
  function Person(name) {
    this.name = name;
  }
  
  var foo = new Person('Lee');
  
  // Person() 생성자 함수에 의해 생성된 객체 (Person.prototype === foo.__proto__)는 foo.
  // foo를 생성한 객체(constructor)는 Person() 생성자 함수 객체이다.
  console.log(Person.prototype.constructor === Person);
  
  // foo 객체를 생성한 객체는 Person() 생성자 함수이다.
  console.log(foo.constructor === Person);
  
  // Person() 생성자 함수를 생성한 객체는 Function() 생성자 함수이다.
  console.log(Person.constructor === Function);
  ```


### 프로토타입 체인 (Prototype chain)
  - 자바스크립트는 특정 객체의 프로퍼티나 메소드에 접근할 때, 필요한 정보가 없으면 `[[Prototype]]`이 가리키는 링크를 따라 자신의 부모 역할인 프로토타입 객체의 프로퍼티나 메서드를 차례대로 검색한다. 이것을 프로토타입 체인이라 한다.

  - 프로토타입 체인 예시
    - student 객체는 hasOwnProperty라는 메서드를 가지고 있지 않지만, student 객체의 `[[Prototype]]`이 가리키는 링크를 따라 프로토타입 객체인 Object.prototype의 메서드를 호출할 수 있다.

    ```javascript
    var student = {
      name: 'Lee',
      score: 90
    }

    // Object.prototype.hasOwnProperty()
    console.log(student.hasOwnProperty('name')); // true
    ```


#### 객체 리터럴을 사용하여 객체를 생성한 경우, 그 객체의 프로토타입 객체는 Object.prototype이다.
  - 객체 리터럴 방식으로 생성된 객체는 내장 함수인 Object() 생성자 함수로 객체를 생성하는 것을 단순화시킨 것
  - Object() 생성자 함수도 함수 객체이므로 prototype 프로퍼티가 있다.
    - Object.prototype
  
  ```javascript
  console.log(foo.__proto__ === Person.prototype);                // ① true
  console.log(Person.prototype.__proto__ === Object.prototype);   // ② true
  console.log(Person.prototype.constructor === Person);           // ③ true
  console.log(Person.__proto__ === Function.prototype);           // ④ true
  console.log(Function.prototype.__proto__ === Object.prototype); // ⑤ true
  ```

  - 모든 프로토타입 객체가 결국 객체이기 때문에 Function.prototype의 프로토타입 객체는 Object.prototype 객체이다.
    - Object.prototype 객체를 프로토타입 체인의 종점(End of prototype chain)이라 한다.



